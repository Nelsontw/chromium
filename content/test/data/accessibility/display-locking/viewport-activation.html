<!--
@BLINK-ALLOW:offscreen
@WAIT-FOR:doneActivating
-->
<div>
  <div id="initialSpacer" style="height: 10000px;">
    initial spacer, will initially make everything below this far away from the viewport
  </div>
  <div id="inViewport" rendersubtree="invisible">
    This text will get viewport-activated because it's in the viewport, and will be in AX tree with layout.
    <div id="nestedInViewport" rendersubtree="invisible">
      This too!
    </div>
  </div>
  <div id="viewportHeightSpacer" style="height: 100vh;" >
    This div's height is the same as the viewport height so everything below this will be offscreen
  </div>
  <div id="belowViewport" rendersubtree="invisible">
    This text will get viewport-activated because it's near the viewport, and will be in AX tree with layout.
  </div>
  <div style="height:10000px;">
    spacer so that everything below will be offscreen (and won't get viewport-activated)
  </div>
  <div id="wayBelowViewport" rendersubtree="invisible">
    This text will not get viewport-activated, and will be in AX tree but without layout.
  </div>
  <div id="statusDiv"></div>
</div>
<script>
  inViewport.getBoundingClientRect();
  inViewport.scrollIntoView();
  // Viewport activation happens on the next frame, so we'll wait until then before ending.
  window.requestAnimationFrame(() => {
    window.requestAnimationFrame(() => {
      statusDiv.innerText = "doneActivating";
    });
  });
</script>
