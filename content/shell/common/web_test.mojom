// Copyright 2020 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

module content.mojom;

import "third_party/blink/public/mojom/permissions/permission_status.mojom";
import "url/mojom/url.mojom";
import "mojo/public/mojom/base/values.mojom";

// Web test messages sent from the renderer process to the browser.
interface WebTestClient {
  // Start to inspect a secondary window.
  InspectSecondaryWindow();

  // Sent by secondary test window to notify the test has finished.
  TestFinishedInSecondaryRenderer();

  // Simulates a user deleting a content index entry.
  SimulateWebContentIndexDelete(string id);

  // Simulates closing a titled web notification depending on the user
  // click.
  //   - |title|: the title of the notification.
  //   - |by_user|: whether the user clicks the notification.
  SimulateWebNotificationClose(string title, bool by_user);

  // Sets the cookie policy to:
  // - allow all cookies when |block| is false
  // - block only third-party cookies when |block| is true
  BlockThirdPartyCookies(bool block);

  // Reset all permissions of WebTestPermissionManager.
  ResetPermissions();

  // Sets the permission for |name| to |status| when queried or requested in
  // |origin| from |embedding_origin|.
  SetPermission(string name,
               blink.mojom.PermissionStatus status,
               url.mojom.Url origin,
               url.mojom.Url embedding_origin);

  // Notifies the browser that one of renderers has changed web test runtime
  // flags (i.e. has set dump_as_text).
  WebTestRuntimeFlagsChanged(
      mojo_base.mojom.DictionaryValue changed_web_test_runtime_flags);

  // Delete all cookies created in this associated storage context.
  DeleteAllCookies();
};
